<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Random YouTube Player</title>
  <style>
    body { font-family: Arial, sans-serif; background:#111; color:#fff; text-align:center; margin:0; padding:20px; }
    iframe { width:80%; max-width:800px; aspect-ratio:16/9; margin-top:20px; }
    #counter { margin-top:20px; font-size:20px; }
  </style>
</head>
<body>
  <h1>ðŸŽ¥ Random YouTube Player</h1>
  <iframe id="player" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
  <div id="counter">Videos Played: 0</div>

  <script>
    async function fetchStatus() {
      try {
        const res = await fetch("/status");
        const data = await res.json();

        // Update player & counter
        document.getElementById("player").src = 
          `https://www.youtube.com/embed/${data.currentVideo}?autoplay=1&controls=1`;
        document.getElementById("counter").innerText = 
          "Videos Played: " + data.videoCount;
      } catch (err) {
        console.error("Error fetching status:", err);
      }
    }

    // Poll server every 5 seconds
    setInterval(fetchStatus, 5000);
    fetchStatus();
  </script>
</body>
</html>
